---
import CardProyect from "../Components/CardProyect.astro"
import BotonPrincipal from "../Components/BotonPrincipal.astro"
import RadioButton from "../Components/RadioButton.astro"
import BotonSegundo from "../Components/BotonSegundo.astro"
import Layoutprincipal from "../layouts/LayoutPrincipal.astro"
import Layoutcontenido from "../layouts/Layoutcontenido.astro"


//datos falsos
const API_URL = 'https://669f9862b132e2c136fe7374.mockapi.io/bancodeproyectos/proyecto';

let data = [];
try {
  const response = await fetch(API_URL);
  if (!response.ok) {
    throw new Error(`Error: ${response.statusText}`);
  }
  data = await response.json();
  console.log('Fetched data:', data);  // Verifica si los datos se est√°n obteniendo correctamente
} catch (error) {
  console.error('Fetch error:', error);
}
---

<Layoutprincipal title="Proyectos">

    <Layoutcontenido title="contenido">
        
    <div class="flex flex-col items-center">
        <div class="w-full max-w-7xl">
            <div class="flex justify-start mb-4 ml-9">
                <div class="grid grid-cols-4 gap-x-8 gap-y-4 mt-4">
                    <RadioButton Text="Aceptado" id=""/>
                    <RadioButton Text="Rechazado" id=""/>
                    <RadioButton Text="Devueltos" id=""/>
                    <RadioButton Text="Todos" id=""/>
                </div>
            </div>

            <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3 font-josefin-slab">
                {data.length > 0 ? (
                  data.map((proyecto) => (
                    <CardProyect Text={proyecto.nombre} >
                      <BotonSegundo Text="Ver" />
                    </CardProyect>
                  ))
                ) : (
                  <p>No hay proyectos para mostrar.</p>
                )}
              </div>
        </div>
    </div>

</Layoutcontenido>
</Layoutprincipal>